<!DOCTYPE html>
<html style="font-size: 16px;">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>index</title>
    <link rel="stylesheet" href="nicepage.css" media="screen">
<link rel="stylesheet" href="index.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 3.19.4, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">
    
    
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": ""
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="index">
    <meta property="og:type" content="website">
  </head>
  <body data-home-page="index.html" data-home-page-title="index" class="u-body u-overlap"><header class="u-clearfix u-header u-header" id="sec-7033"><div class="u-clearfix u-sheet u-sheet-1"></div></header>
    <section class="u-clearfix u-valign-middle u-section-1" id="sec-f948">
      <div class="u-clearfix u-expanded-width u-gutter-4 u-layout-wrap u-layout-wrap-1">
        <div class="u-layout">
          <div class="u-layout-row">
            <div class="u-container-style u-image u-layout-cell u-left-cell u-size-40 u-image-1" src="" data-image-width="1920" data-image-height="776">
              <div class="u-container-layout u-container-layout-1">
                <img class="u-image u-image-default u-preserve-proportions u-image-2" src="images/Logo_Okta_Blue_RGB.png" alt="" data-image-width="500" data-image-height="169">
              </div>
            </div>
            <div class="u-align-left u-container-style u-layout-cell u-right-cell u-size-20 u-white u-layout-cell-2">
              <div class="u-container-layout u-container-layout-2">
                <p class="u-text u-text-1">
<!------------------------------------------------------------------------------------------------------------------------------------------------------------------->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
  integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous"> 
   <!-- widget stuff here -->
    <script src="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.16.0/js/okta-sign-in.min.js"type="text/javascript"></script>
  <link href="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.16.0/css/okta-sign-in.min.css"type="text/css" rel="stylesheet" />
 <link href="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.16.0/css/okta-theme.css"type="text/css" rel="stylesheet" />                      

  
      <div id="okta-login-container"></div> 
      <script type="text/javascript">
        const oktaSignIn = new OktaSignIn({
        //logo: 'https://www.okta.com/sites/default/files/media/image/2021-03/Logo_Okta_Blue_RGB.png',

        i18n: {
            //Overrides default text when using English. Override other languages by adding additional sections.
            'en': {
              'primaryauth.title': 'Log In',             // Changes the sign in text
              'primaryauth.submit': 'Log In',            // Changes the sign in button
              
              // More e.g. [primaryauth.username.placeholder,  primaryauth.password.placeholder, needhelp, etc.].
              // Full list here: https://github.com/okta/okta-signin-widget/blob/master/packages/@okta/i18n/dist/properties/login.properties
            }
          },
         features: {
         registration: true,                           // Enable self-service registration flow
         rememberMe: true,                             // Setting to false will remove the checkbox to save username
         multiOptionalFactorEnroll: true, 

         
         },
 

         
         baseUrl: "",
         redirectUri: "",
         clientId: "",   //CLIENT ID GOES HERE
         authParams: {
           issuer: '',
         //  issuer: 'default',
           responseType: ['token', 'id_token'],
           responseMode: 'fragment',
            display: 'page',

             scope: [
              'openid',
              'email',
              'profile'
              //'address',
              //'phone',
              //'groups'
            ]
         },
         idpDisplay: 'SECONDARY',
         idps: [{'type': 'FACEBOOK', 'id': ''},
                 {'type': 'GOOGLE', 'id': ''}],
         
     registration: {
      parseSchema: function(schema, onSuccess, onFailure) {
      console.log(schema.profileSchema);
      onSuccess(schema);
    },
      preSubmit: function(postData, onSuccess, onFailure) {
        // handle preSubmit callback
        var getEmailvalue = document.getElementsByName('email')[0].value;
        var getAcceptedPrivacyPolicyValue = document.getElementsByName('acceptedPrivacyPolicy')[0].value;
        var getFirstName = document.getElementsByName('firstName')[0].value;
        var getLastName = document.getElementsByName('lastName')[0].value;
		
        postData.acceptedPrivacyPolicy = Boolean(getAcceptedPrivacyPolicyValue);
      	console.log(postData);
        
        if (getAcceptedPrivacyPolicyValue == "") {
          var labelAcceptedPrivacyPolicy = document.getElementById('label-my-acceptedPrivacyPolicy');
          if (document.getElementById('acceptedPrivacyPolicy-error') == undefined) {
            labelAcceptedPrivacyPolicy.insertAdjacentHTML('afterend', "<p id='acceptedPrivacyPolicy-error' style='color:#d93934;'>You must agree to the terms of use.</p>");
          }
        }
        else {
          onSuccess(postData);
        }
      },
      postSubmit: function(response, onSuccess, onFailure) {
        // handle postsubmit callback
        onSuccess(response);
      }
    }       
});
 
 
      oktaSignIn.on('afterRender', function (context) {
  	  console.log(context.controller);        
       
      if (context.controller== 'registration') {
        // Retrieve fields
        var nativElemFirstName = document.getElementsByName('firstName')[0];
        var nativElemLastName = document.getElementsByName('lastName')[0];
        var nativElemEmail = document.getElementsByName('email')[0];
        var nativElemPwd = document.getElementsByName('password')[0];
        var nativElemAcceptedPrivacyPolicy = document.getElementsByName('acceptedPrivacyPolicy')[0];
        
        // Retrieve the parents of the fields
        var parentsPwd = nativElemPwd.parentNode.parentNode.parentNode;
        var parentsFirstName = nativElemFirstName.parentNode.parentNode.parentNode;
        var parentsLastName = nativElemLastName.parentNode.parentNode.parentNode;
        var parentsEmail = nativElemEmail.parentNode.parentNode.parentNode;
        var parentsAcceptedPrivacyPolicy = nativElemAcceptedPrivacyPolicy.parentNode.parentNode.parentNode;
        
        // Hide original drop-down field
        parentsAcceptedPrivacyPolicy.style.display = "none";
              
        // Add checkbox
        parentsAcceptedPrivacyPolicy.insertAdjacentHTML('afterend', '<span data-se="o-form-input-my-acceptedPrivacyPolicy" class="o-form-input-name-remember"><div class="custom-checkbox"><input type="checkbox" name="my-acceptedPrivacyPolicy" id="my-acceptedPrivacyPolicy"><label id="label-my-acceptedPrivacyPolicy" for="my-acceptedPrivacyPolicy" data-se-for-name="my-acceptedPrivacyPolicy" class="">Accept the <a href="https://www.okta.com/privacy-policy/" target="_blank" id="link-acceptedPrivacyPolicy">Privacy Policy</a>.</label>');

        // Recovery of the field
        var newElemAcceptedPrivacyPolicy = document.getElementById('my-acceptedPrivacyPolicy');

        // Re-organise the form
        var form = document.getElementsByClassName("o-form-fieldset-container")[0];
        form.insertBefore(parentsFirstName, form.firstChild);
        $(parentsLastName).insertAfter(parentsFirstName);
        $(parentsEmail).insertAfter(parentsLastName);
        $(parentsPwd).insertAfter(parentsEmail);
        $('subschemas-password').insertAfter(parentsPwd);

           // Management of Accepted Privacy Policy events
           newElemAcceptedPrivacyPolicy.addEventListener('click', function (e) {
          e.preventDefault();
          e.stopPropagation();
          // Toggle check
          var labelAcceptedPrivacyPolicy = document.getElementById('label-my-acceptedPrivacyPolicy');
          if (labelAcceptedPrivacyPolicy.className === "checked") {
            labelAcceptedPrivacyPolicy.className = "";
            newElemAcceptedPrivacyPolicy.checked = false;
            document.getElementsByName('acceptedPrivacyPolicy')[0].value = "";
            labelAcceptedPrivacyPolicy.insertAdjacentHTML('afterend', "<p id='acceptedPrivacyPolicy-error'>You must accept to the privacy policy.</p>");         
          } 
          else {
            labelAcceptedPrivacyPolicy.className = "checked";
            newElemAcceptedPrivacyPolicy.checked = true;
            document.getElementsByName('acceptedPrivacyPolicy')[0].value = true;
            var errorAcceptedPrivacyPolicy = document.getElementById("acceptedPrivacyPolicy-error");
            if (errorAcceptedPrivacyPolicy != undefined) {                 
              errorAcceptedPrivacyPolicy.parentNode.removeChild(errorAcceptedPrivacyPolicy);                    
            }
          }
          // set DOM reference variable
          var field = document.getElementsByName('acceptedPrivacyPolicy')[0];
          // create event with bubble set to true
          var event = new Event("change", { bubbles: true });
          // dispatch event for the desired DOM reference
          field.dispatchEvent(event);
        });
        
      }
});

if (oktaSignIn.token.hasTokensInUrl()) 
       { 
         oktaSignIn.token.parseTokensFromUrl(
           // If we get here, the user just logged in.
           function success(res) {			 
              var accessToken = res[0];
              var idToken = res[1];
 
              oktaSignIn.tokenManager.add('accessToken', accessToken);
              oktaSignIn.tokenManager.add('idToken', idToken);			
             window.location.hash = '';
             // document.getElementById("messageBox").style.color = "	#FFFFFF";
             // document.getElementById("messageBox").innerHTML = "Hello, " + idToken.claims.email + "! You just logged in! :)";
              window.location.hash = '';
             
           },
           function error(err) {
             // console.error(err);
           }
         )
       } else {
         
         oktaSignIn.session.get(function (res) {
           // If we get here, the user is already signed in.
           if (res.status === 'ACTIVE') {
             
             // document.getElementById("messageBox").style.color = "	#FFFFFF";
             // document.getElementById("messageBox").innerHTML = "Hello, " + res.login + "! You are *still* logged in! :)";
              window.location.replace("https://ciam-sample-1.white-lions-den.duckdns.org/");
             
             return;
           }
           
           oktaSignIn.renderEl(
             { el: '#okta-login-container' },
              function success(res) {  
                var key = '';
                if (res.tokens) {
                  oktaSignIn.authClient.tokenManager.add('accessToken', res.tokens.accessToken);
                  oktaSignIn.authClient.tokenManager.add('idToken', res.tokens.idToken);
                  if (res.status === 'SUCCESS') {
                    login(res.tokens.idToken, res.tokens.accessToken);
                  }
                }
             },
             
             function error(err) {
               console.error(err);
             }
           );
           
         });
       }

// oktaSignIn.renderEl( //Caution editing this section as you may break the demo.
//     {el: '#okta-login-container'},
//     function (res) {
//         var key = '';
//         if (res.tokens) {
//             oktaSignIn.authClient.tokenManager.add('accessToken', res.tokens.accessToken);
//             oktaSignIn.authClient.tokenManager.add('idToken', res.tokens.idToken);
//             if (res.status === 'SUCCESS') {
//                 login(res.tokens.idToken, res.tokens.accessToken);
//             }
//         }
//     }
// );
     </script>


                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    
  </body>
</html>
